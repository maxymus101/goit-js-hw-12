{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/svg/wn-ic.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49484278-b8d1b278e9cf12a9e395a9aea';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.error('Помилка запиту:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const galleryContainer = document.querySelector('.gallery');\nexport const loader = document.querySelector('.loader');\nexport const loadMoreButton = document.querySelector('.load-more');\nlet lightbox;\n\nexport function createGallery(images) {\n  if (images.length === 0) {\n    galleryContainer.innerHTML = '';\n    hideLoadMoreButton();\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  images.forEach(hit => {\n    const item = document.createElement('li');\n    item.classList.add('gallery-item');\n\n    const link = document.createElement('a');\n    link.href = hit.largeImageURL;\n    link.dataset.caption = hit.tags;\n\n    const img = document.createElement('img');\n    img.src = hit.webformatURL;\n    img.alt = hit.tags;\n\n    const stats = document.createElement('div');\n    stats.classList.add('image-stats');\n    stats.innerHTML = `\n            <div><p class=\"stat-title\">Likes</p><p class=\"stat-text\">${hit.likes}</p></div>\n            <div><p class=\"stat-title\">Views</p><p class=\"stat-text\">${hit.views}</p></div>\n            <div><p class=\"stat-title\">Comments</p><p class=\"stat-text\">${hit.comments}</p></div>\n            <div><p class=\"stat-title\">Downloads</p><p class=\"stat-text\">${hit.downloads}</p></div>\n        `;\n\n    link.appendChild(img);\n    item.appendChild(link);\n    item.appendChild(stats);\n    fragment.appendChild(item);\n  });\n\n  galleryContainer.appendChild(fragment);\n\n  try {\n    if (lightbox) {\n      lightbox.refresh();\n    } else {\n      lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    }\n  } catch (error) {\n    console.error('Помилка SimpleLightbox:', error);\n  }\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.style.display = 'inline-flex';\n}\n\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  loadMoreButton.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreButton.classList.add('is-hidden');\n}\n","export default \"data:image/svg+xml,%3c!--%20Generated%20by%20IcoMoon.io%20--%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='1024'%20height='1024'%20viewBox='0%200%201024%201024'%3e%3cg%20id='icomoon-ignore'%3e%3c/g%3e%3cpath%20fill='%23fafafb'%20d='M290.56%209.344c5.788-5.774%2013.776-9.344%2022.599-9.344%200.005%200%200.010%200%200.015%200h397.653c0.004%200%200.009%200%200.015%200%208.822%200%2016.811%203.57%2022.599%209.345l281.215%20281.215c5.774%205.788%209.344%2013.776%209.344%2022.599%200%200.005%200%200.010%200%200.015v-0.001%20397.653c0%200.004%200%200.009%200%200.015%200%208.822-3.57%2016.811-9.345%2022.599l-281.215%20281.215c-5.788%205.774-13.776%209.344-22.599%209.344-0.005%200-0.010%200-0.015%200h-397.653c-0.004%200-0.009%200-0.015%200-8.822%200-16.811-3.57-22.599-9.345l-281.215-281.215c-5.774-5.788-9.344-13.776-9.344-22.599%200-0.005%200-0.010%200-0.015v0.001-397.653c0-0.004%200-0.009%200-0.015%200-8.822%203.57-16.811%209.345-22.599l281.215-281.215zM326.4%2064l-262.4%20262.4v371.2l262.4%20262.4h371.2l262.4-262.4v-371.2l-262.4-262.4h-371.2z'%3e%3c/path%3e%3cpath%20fill='%23fafafb'%20d='M297.344%20297.344c5.794-5.808%2013.805-9.401%2022.656-9.401s16.862%203.593%2022.655%209.401l169.345%20169.388%20169.344-169.387c5.798-5.798%2013.808-9.384%2022.656-9.384%2017.695%200%2032.040%2014.345%2032.040%2032.040%200%208.848-3.586%2016.858-9.384%2022.656l-169.387%20169.344%20169.387%20169.344c5.106%205.659%208.229%2013.193%208.229%2021.456%200%2017.72-14.365%2032.085-32.085%2032.085-8.263%200-15.797-3.124-21.484-8.255l0.028%200.025-169.344-169.387-169.344%20169.387c-5.799%205.762-13.79%209.324-22.614%209.324-17.683%200-32.025-14.305-32.085-31.974v-0.006c0.001-8.848%203.588-16.858%209.387-22.656l169.387-169.344-169.344-169.344c-5.808-5.794-9.401-13.805-9.401-22.656s3.593-16.862%209.401-22.655l0.001-0.001z'%3e%3c/path%3e%3c/svg%3e\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  loadMoreButton,\n} from './js/render-functions';\nimport pathIcon from './img/svg/wn-ic.svg';\n{\n  iconUrl: pathIcon;\n}\n\nconst form = document.querySelector('.form');\nconst searchInp = document.querySelector('input[name=\"search-text\"]');\nlet currentPage = 1;\nlet currentQuery = '';\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  const query = searchInp.value.trim();\n\n  if (query === '') {\n    clearGallery();\n    hideLoadMoreButton();\n    iziToast.error({\n      title: '',\n      titleColor: '#FFFFFF',\n      iconColor: '#fffff',\n      iconUrl: pathIcon,\n      messageColor: '#FFFFFF',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n      progressBar: true,\n      progressBarColor: ' #B51B1B',\n      closeOnClick: true,\n      timeout: 3500,\n      message: 'Будь ласка, заповніть поле для вводу!',\n    });\n    return;\n  }\n\n  currentPage = 1;\n  currentQuery = query;\n  hideLoadMoreButton();\n  clearGallery();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n\n    if (data.hits.length === 0) {\n      clearGallery();\n      iziToast.error({\n        title: '',\n        titleColor: '#FFFFFF',\n        iconColor: '#fffff',\n        iconUrl: pathIcon,\n        messageColor: '#FFFFFF',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n        progressBar: true,\n        progressBarColor: ' #B51B1B',\n        closeOnClick: true,\n        timeout: 3500,\n        message: 'Вибачте, за вашим запитом нічого не знайдено.',\n      });\n      hideLoadMoreButton();\n    } else {\n      createGallery(data.hits);\n      if (currentPage * 15 >= data.totalHits) {\n        hideLoadMoreButton();\n        iziToast.info({\n          title: '',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      } else {\n        showLoadMoreButton();\n      }\n    }\n  } catch (error) {\n    clearGallery();\n    iziToast.error({\n      title: '',\n      titleColor: '#FFFFFF',\n      iconColor: '#fffff',\n      iconUrl: pathIcon,\n      messageColor: '#FFFFFF',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n      progressBar: true,\n      progressBarColor: ' #B51B1B',\n      closeOnClick: true,\n      timeout: 3500,\n      message: 'Виникла помилка при завантаженні зображень. Спробуйте ще раз.',\n    });\n    hideLoadMoreButton();\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    createGallery(data.hits);\n    showLoadMoreButton();\n\n    const { height: cardHeight } = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect();\n\n    // Прокручуємо сторінку на дві висоти карточки\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (currentPage * 15 >= data.totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    clearGallery();\n    iziToast.error({\n      title: '',\n      titleColor: '#FFFFFF',\n      iconColor: '#fffff',\n      iconUrl: pathIcon,\n      messageColor: '#FFFFFF',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n      progressBar: true,\n      progressBarColor: ' #B51B1B',\n      closeOnClick: true,\n      timeout: 3500,\n      message: 'Виникла помилка при завантаженні зображень. Спробуйте ще раз.',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","response","axios","error","galleryContainer","loader","loadMoreButton","lightbox","createGallery","images","hideLoadMoreButton","fragment","hit","item","link","img","stats","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","pathIcon","form","searchInp","currentPage","currentQuery","event","iziToast","data","cardHeight"],"mappings":"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"}